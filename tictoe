<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A-Level Chemistry Tic-Tac-Toe</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;700;900&amp;family=Rajdhani:wght@500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Rajdhani', sans-serif;
    }
    .title-font {
      font-family: 'Exo 2', sans-serif;
    }
    .cell {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    .cell::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center, rgba(0,229,255,0.2) 0%, transparent 70%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .cell:hover:not(.taken)::before {
      opacity: 1;
    }
    .cell:hover:not(.taken) {
      transform: translateY(-5px) scale(1.03);
      box-shadow: 0 12px 35px rgba(0,229,255,0.4);
    }
    .pulse-glow {
      animation: pulseGlow 2.5s ease-in-out infinite;
    }
    @keyframes pulseGlow {
      0%, 100% { 
        box-shadow: 0 0 30px currentColor, 0 0 60px currentColor;
      }
      50% { 
        box-shadow: 0 0 20px currentColor, 0 0 40px currentColor;
      }
    }
    .slide-up {
      animation: slideUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    @keyframes slideUp {
      from { 
        transform: translateY(50px); 
        opacity: 0; 
      }
      to { 
        transform: translateY(0); 
        opacity: 1; 
      }
    }
    .pop-in {
      animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    @keyframes popIn {
      0% { transform: scale(0) rotate(-270deg); opacity: 0; }
      50% { transform: scale(1.15) rotate(15deg); }
      100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }
    .glass-panel {
      background: rgba(10, 25, 47, 0.7);
      backdrop-filter: blur(16px);
      border: 2px solid rgba(0, 229, 255, 0.3);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 0 20px rgba(0, 229, 255, 0.05);
    }
    .neon-border {
      box-shadow: 0 0 15px currentColor, 0 0 30px currentColor, inset 0 0 10px rgba(255,255,255,0.1);
    }
    .difficulty-btn {
      transition: all 0.3s ease;
      position: relative;
    }
    .difficulty-btn:hover {
      transform: translateY(-3px);
    }
    .difficulty-btn.active::after {
      content: '';
      position: absolute;
      inset: -2px;
      background: linear-gradient(45deg, transparent, currentColor, transparent);
      border-radius: inherit;
      z-index: -1;
      animation: borderRotate 3s linear infinite;
    }
    @keyframes borderRotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .option-btn {
      transition: all 0.2s ease;
    }
    .option-btn:hover:not(:disabled) {
      transform: translateX(10px);
      border-color: rgba(0, 229, 255, 0.6);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full overflow-auto" style="background: radial-gradient(ellipse at top left, #0a192f 0%, #020817 40%, #0f0721 70%, #000000 100%);">
   <div class="min-h-full w-full flex flex-col items-center justify-center p-4 md:p-8"><!-- Header -->
    <div class="text-center mb-8 slide-up">
     <h1 id="game-title" class="title-font text-4xl md:text-6xl font-black mb-3 tracking-wide" style="background: linear-gradient(90deg, #00e5ff 0%, #00b4d8 25%, #0096c7 50%, #ff006e 75%, #d90368 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 40px rgba(0,229,255,0.5);">‚öóÔ∏è A-LEVEL CHEMISTRY</h1>
     <p class="text-cyan-300 text-base md:text-lg font-semibold mb-6 tracking-wide">Answer correctly to claim your square!</p><!-- Difficulty Selector -->
     <div class="flex gap-3 justify-center flex-wrap"><button class="difficulty-btn active px-6 py-3 rounded-xl font-bold text-sm bg-emerald-500/20 text-emerald-400 border-2 border-emerald-500" data-level="easy"> üü¢ FOUNDATION </button> <button class="difficulty-btn px-6 py-3 rounded-xl font-bold text-sm bg-amber-500/20 text-amber-400 border-2 border-amber-500/50" data-level="medium"> üü° INTERMEDIATE </button> <button class="difficulty-btn px-6 py-3 rounded-xl font-bold text-sm bg-rose-500/20 text-rose-400 border-2 border-rose-500/50" data-level="hard"> üî¥ ADVANCED </button>
     </div>
    </div><!-- Score Board -->
    <div class="flex gap-4 md:gap-6 mb-8 w-full max-w-4xl justify-center slide-up" style="animation-delay: 0.1s;">
     <div id="player1-card" class="flex-1 max-w-[220px] glass-panel rounded-2xl p-5 text-center transition-all duration-300">
      <div class="text-xs font-bold uppercase tracking-widest mb-2 text-cyan-400/80">
       PLAYER ONE
      </div>
      <div id="player1-display" class="text-white font-black text-2xl mb-3 truncate">
       Player 1
      </div>
      <div class="text-7xl font-black mb-2 text-cyan-400" id="p1-wins">
       0
      </div>
      <div class="text-xs font-bold uppercase tracking-wider text-cyan-400/70">
       VICTORIES
      </div>
     </div>
     <div class="glass-panel rounded-2xl p-5 text-center min-w-[140px]">
      <div class="text-slate-400 text-xs font-bold uppercase tracking-widest mb-2">
       DRAWS
      </div>
      <div class="text-7xl font-black text-slate-300 mb-2" id="draws">
       0
      </div>
      <div class="text-slate-400 text-xs font-bold uppercase tracking-wider">
       STALEMATES
      </div>
     </div>
     <div id="player2-card" class="flex-1 max-w-[220px] glass-panel rounded-2xl p-5 text-center transition-all duration-300">
      <div class="text-xs font-bold uppercase tracking-widest mb-2 text-pink-400/80">
       PLAYER TWO
      </div>
      <div id="player2-display" class="text-white font-black text-2xl mb-3 truncate">
       Player 2
      </div>
      <div class="text-7xl font-black mb-2 text-pink-400" id="p2-wins">
       0
      </div>
      <div class="text-xs font-bold uppercase tracking-wider text-pink-400/70">
       VICTORIES
      </div>
     </div>
    </div><!-- Turn Indicator -->
    <div id="turn-indicator" class="mb-8 px-12 py-4 rounded-full text-white font-black text-xl md:text-2xl pulse-glow slide-up tracking-wide" style="animation-delay: 0.2s;">
     ‚ñ∂ PLAYER 1 TURN (X)
    </div><!-- Game Board -->
    <div class="mb-8 slide-up" style="animation-delay: 0.3s;">
     <div id="game-board" class="grid grid-cols-3 gap-4 md:gap-5 p-6 md:p-8 glass-panel rounded-3xl"><!-- Cells generated by JS -->
     </div>
    </div><!-- Question Modal -->
    <div id="question-modal" class="hidden fixed inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center p-4 z-50">
     <div class="glass-panel rounded-3xl p-6 md:p-10 max-w-4xl w-full shadow-2xl slide-up">
      <div class="flex items-center justify-between mb-6">
       <div id="question-header" class="font-black text-lg uppercase tracking-wider">
        PLAYER 1 QUESTION
       </div>
       <div id="difficulty-badge" class="px-5 py-2 rounded-full text-sm font-bold neon-border">
        FOUNDATION
       </div>
      </div>
      <div class="bg-gradient-to-br from-cyan-900/30 to-purple-900/30 rounded-2xl p-6 md:p-8 mb-6 border-2 border-cyan-500/30">
       <h3 id="question-text" class="text-white text-xl md:text-2xl font-bold leading-relaxed"></h3>
      </div>
      <div id="options-container" class="space-y-3"><!-- Options generated by JS -->
      </div>
      <div id="feedback" class="mt-8 text-center font-black text-3xl hidden"></div>
     </div>
    </div><!-- Game Over Modal -->
    <div id="gameover-modal" class="hidden fixed inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center p-4 z-50">
     <div class="glass-panel rounded-3xl p-10 md:p-12 max-w-xl w-full text-center shadow-2xl slide-up">
      <div id="gameover-icon" class="text-9xl mb-6 pop-in"></div>
      <h3 id="gameover-text" class="text-white text-5xl font-black mb-12"></h3><button id="play-again-btn" class="w-full bg-gradient-to-r from-cyan-500 via-blue-500 to-pink-500 text-white font-black text-2xl py-6 px-8 rounded-2xl hover:from-cyan-600 hover:via-blue-600 hover:to-pink-600 transition-all transform hover:scale-105 shadow-lg neon-border"> üéÆ PLAY AGAIN </button>
     </div>
    </div><!-- Reset Button --> <button id="reset-stats" class="mt-6 text-slate-400 hover:text-cyan-400 text-sm font-bold transition-colors uppercase tracking-widest"> üîÑ Reset All Statistics </button>
   </div>
  </div>
  <script>
    // A-Level Organic Chemistry Questions
    const questionBanks = {
      easy: [
        { q: "What is the functional group in alcohols?", options: ["-OH", "-COOH", "-CHO", "-NH‚ÇÇ"], answer: 0 },
        { q: "What is the general formula for alkanes?", options: ["C‚ÇôH‚ÇÇ‚Çô", "C‚ÇôH‚ÇÇ‚Çô‚Çä‚ÇÇ", "C‚ÇôH‚ÇÇ‚Çô‚Çã‚ÇÇ", "C‚ÇôH‚Çô"], answer: 1 },
        { q: "Which compound has a carbon-carbon double bond?", options: ["Alkane", "Alkene", "Alkyne", "Arene"], answer: 1 },
        { q: "What is the IUPAC name of CH‚ÇÉCH‚ÇÇCH‚ÇÉ?", options: ["Methane", "Ethane", "Propane", "Butane"], answer: 2 },
        { q: "What functional group is present in aldehydes?", options: ["-OH", "-CHO", "-COOH", "-CO-"], answer: 1 },
        { q: "What is the molecular formula of ethanol?", options: ["CH‚ÇÉOH", "C‚ÇÇH‚ÇÖOH", "C‚ÇÉH‚ÇáOH", "C‚ÇÑH‚ÇâOH"], answer: 1 },
        { q: "Which suffix is used for alkenes in IUPAC nomenclature?", options: ["-ane", "-ene", "-yne", "-ol"], answer: 1 },
        { q: "What type of bond is in alkynes?", options: ["Single", "Double", "Triple", "Aromatic"], answer: 2 },
        { q: "What is the functional group in carboxylic acids?", options: ["-OH", "-CHO", "-COOH", "-CO-"], answer: 2 },
        { q: "How many carbon atoms are in butane?", options: ["2", "3", "4", "5"], answer: 2 },
        { q: "What is the general formula for alkenes?", options: ["C‚ÇôH‚ÇÇ‚Çô‚Çä‚ÇÇ", "C‚ÇôH‚ÇÇ‚Çô", "C‚ÇôH‚ÇÇ‚Çô‚Çã‚ÇÇ", "C‚ÇôH‚Çô"], answer: 1 },
        { q: "Which is a saturated hydrocarbon?", options: ["Alkane", "Alkene", "Alkyne", "Arene"], answer: 0 },
        { q: "What functional group is in ketones?", options: ["-CHO", "-COOH", "-CO-", "-OH"], answer: 2 },
        { q: "What is the IUPAC name of CH‚ÇÉOH?", options: ["Methanol", "Ethanol", "Propanol", "Butanol"], answer: 0 },
        { q: "What type of hydrocarbon is benzene?", options: ["Alkane", "Alkene", "Alkyne", "Aromatic"], answer: 3 },
        { q: "How many bonds does carbon typically form?", options: ["2", "3", "4", "5"], answer: 2 },
        { q: "What is the suffix for alcohols?", options: ["-ane", "-ene", "-ol", "-al"], answer: 2 },
        { q: "Which compound contains C‚ÇÇH‚ÇÑ?", options: ["Ethane", "Ethene", "Ethyne", "Ethanol"], answer: 1 },
        { q: "What is the molecular formula of methane?", options: ["CH‚ÇÑ", "C‚ÇÇH‚ÇÜ", "C‚ÇÉH‚Çà", "CH‚ÇÉOH"], answer: 0 },
        { q: "What functional group is -COO-?", options: ["Ether", "Ester", "Aldehyde", "Ketone"], answer: 1 },
        { q: "What is the general formula for alkynes?", options: ["C‚ÇôH‚ÇÇ‚Çô‚Çä‚ÇÇ", "C‚ÇôH‚ÇÇ‚Çô", "C‚ÇôH‚ÇÇ‚Çô‚Çã‚ÇÇ", "C‚ÇôH‚Çô"], answer: 2 },
        { q: "Which is an unsaturated hydrocarbon?", options: ["Propane", "Propene", "Butane", "Pentane"], answer: 1 },
        { q: "What suffix is used for aldehydes?", options: ["-ol", "-al", "-one", "-oic acid"], answer: 1 },
        { q: "What is the IUPAC name of CH‚ÇÉCH‚ÇÇOH?", options: ["Methanol", "Ethanol", "Propanol", "Butanol"], answer: 1 },
        { q: "What type of isomerism involves different carbon chain arrangements?", options: ["Position", "Chain", "Functional", "Stereoisomerism"], answer: 1 },
        { q: "Which element is always present in organic compounds?", options: ["Nitrogen", "Oxygen", "Carbon", "Sulfur"], answer: 2 },
        { q: "What is the suffix for carboxylic acids?", options: ["-ol", "-al", "-oic acid", "-one"], answer: 2 },
        { q: "What is the molecular formula of propane?", options: ["C‚ÇÇH‚ÇÜ", "C‚ÇÉH‚Çà", "C‚ÇÑH‚ÇÅ‚ÇÄ", "C‚ÇÉH‚ÇÜ"], answer: 1 },
        { q: "Which contains only single bonds?", options: ["Alkane", "Alkene", "Alkyne", "Arene"], answer: 0 },
        { q: "What is the suffix for ketones?", options: ["-ol", "-al", "-one", "-oic acid"], answer: 2 }
      ],
      medium: [
        { q: "What reagent tests for alkenes?", options: ["Fehling's solution", "Bromine water", "Tollens' reagent", "Lucas reagent"], answer: 1 },
        { q: "What mechanism occurs when ethene reacts with HBr?", options: ["Free radical substitution", "Electrophilic addition", "Nucleophilic substitution", "Elimination"], answer: 1 },
        { q: "What is formed when a primary alcohol is oxidized?", options: ["Ketone", "Aldehyde then carboxylic acid", "Ester", "Ether"], answer: 1 },
        { q: "What is the IUPAC name of (CH‚ÇÉ)‚ÇÇCHOH?", options: ["Propan-1-ol", "Propan-2-ol", "Butan-2-ol", "2-methylpropan-1-ol"], answer: 1 },
        { q: "Which shows geometric isomerism?", options: ["Propene", "But-1-ene", "But-2-ene", "Ethene"], answer: 2 },
        { q: "What reagent distinguishes aldehydes from ketones?", options: ["Bromine water", "Tollens' reagent", "Concentrated H‚ÇÇSO‚ÇÑ", "NaOH"], answer: 1 },
        { q: "What is the hybridization of carbon in ethene?", options: ["sp", "sp¬≤", "sp¬≥", "sp¬≥d"], answer: 1 },
        { q: "Which alcohol is resistant to oxidation?", options: ["Primary", "Secondary", "Tertiary", "All oxidize equally"], answer: 2 },
        { q: "What is Markovnikov's rule about?", options: ["Elimination", "Addition to unsymmetrical alkenes", "Substitution", "Oxidation"], answer: 1 },
        { q: "What product forms from propan-2-ol oxidation?", options: ["Propanoic acid", "Propanone", "Propanal", "Propene"], answer: 1 },
        { q: "Which reaction forms esters?", options: ["Hydrolysis", "Esterification", "Oxidation", "Reduction"], answer: 1 },
        { q: "What is the IUPAC name of CH‚ÇÉCOCH‚ÇÉ?", options: ["Propanal", "Propanone", "Propanoic acid", "Propan-2-ol"], answer: 1 },
        { q: "Which mechanism involves carbocation intermediates?", options: ["SN2", "SN1", "E2", "Addition"], answer: 1 },
        { q: "What is formed when ethene reacts with steam/H‚ÇÉPO‚ÇÑ?", options: ["Ethane", "Ethanol", "Ethanoic acid", "Ethanal"], answer: 1 },
        { q: "What type of isomerism is shown by propan-1-ol and propan-2-ol?", options: ["Chain", "Position", "Functional", "Geometric"], answer: 1 },
        { q: "Which reagent oxidizes primary alcohols to aldehydes only?", options: ["KMnO‚ÇÑ", "K‚ÇÇCr‚ÇÇO‚Çá/H‚ÇÇSO‚ÇÑ reflux", "PCC/CH‚ÇÇCl‚ÇÇ", "Acidified K‚ÇÇCr‚ÇÇO‚Çá reflux"], answer: 2 },
        { q: "What is the major product of (CH‚ÇÉ)‚ÇÇC=CH‚ÇÇ + HBr?", options: ["1-bromo-2-methylpropane", "2-bromo-2-methylpropane", "1-bromobutane", "2-bromobutane"], answer: 1 },
        { q: "What forms when an ester undergoes hydrolysis?", options: ["Alcohol + aldehyde", "Alcohol + ketone", "Alcohol + carboxylic acid", "Two alcohols"], answer: 2 },
        { q: "Which shows cis-trans isomerism?", options: ["CH‚ÇÉCH=CH‚ÇÇ", "CH‚ÇÇ=CH‚ÇÇ", "CH‚ÇÉCH=CHCH‚ÇÉ", "CH‚ÇÉCH‚ÇÇCH=CH‚ÇÇ"], answer: 2 },
        { q: "What is the product when ethanol is dehydrated?", options: ["Ethane", "Ethene", "Ethanal", "Ethanoic acid"], answer: 1 },
        { q: "Which functional group gives a positive iodoform test?", options: ["Primary alcohol", "Methyl ketone", "Aldehyde", "Carboxylic acid"], answer: 1 },
        { q: "What is the IUPAC name of CH‚ÇÉCH‚ÇÇCOOH?", options: ["Ethanoic acid", "Propanoic acid", "Butanoic acid", "Methanoic acid"], answer: 1 },
        { q: "Which reaction adds H‚ÇÇ to alkenes?", options: ["Oxidation", "Hydrogenation", "Halogenation", "Hydration"], answer: 1 },
        { q: "What type of compound is C‚ÇÜH‚ÇÖOH?", options: ["Alcohol", "Phenol", "Ether", "Ester"], answer: 1 },
        { q: "Which test gives a silver mirror?", options: ["Fehling's test", "Tollens' test", "Iodoform test", "Brady's test"], answer: 1 },
        { q: "What is formed when benzene reacts with Br‚ÇÇ/FeBr‚ÇÉ?", options: ["Bromobenzene", "Benzyl bromide", "Cyclohexane", "1,2-dibromobenzene"], answer: 0 },
        { q: "Which shows functional group isomerism with ethanol?", options: ["Propanol", "Methoxyethane", "Ethanal", "Ethanoic acid"], answer: 1 },
        { q: "What is the hybridization of carbonyl carbon?", options: ["sp", "sp¬≤", "sp¬≥", "sp¬≥d"], answer: 1 },
        { q: "Which undergoes nucleophilic addition most readily?", options: ["Ketone", "Aldehyde", "Ester", "Carboxylic acid"], answer: 1 },
        { q: "What is the major product when propene reacts with HCl?", options: ["1-chloropropane", "2-chloropropane", "1,2-dichloropropane", "Propane"], answer: 1 }
      ],
      hard: [
        { q: "In halogenation of alkanes, what initiates the free radical chain reaction?", options: ["Heat only", "UV light or heat", "Catalyst", "Acid"], answer: 1 },
        { q: "What is the first step in the free radical halogenation mechanism?", options: ["Propagation", "Initiation (homolytic fission)", "Termination", "Substitution"], answer: 1 },
        { q: "In complete combustion of alkanes, what are the products?", options: ["CO + H‚ÇÇO", "CO‚ÇÇ + H‚ÇÇO", "C + H‚ÇÇO", "CO‚ÇÇ + H‚ÇÇ"], answer: 1 },
        { q: "What catalyst is used for dehydration of alcohols?", options: ["H‚ÇÉPO‚ÇÑ or conc. H‚ÇÇSO‚ÇÑ", "NaOH", "KMnO‚ÇÑ", "Ni"], answer: 0 },
        { q: "In dehydration of alcohols, what is the major product according to Zaitsev's rule?", options: ["Less substituted alkene", "More substituted alkene", "Primary alcohol", "Ketone"], answer: 1 },
        { q: "What reagent is used for dehydrohalogenation of alkyl halides?", options: ["Aqueous acid", "Alcoholic KOH or NaOH", "Cold water", "H‚ÇÇSO‚ÇÑ"], answer: 1 },
        { q: "In dehydrohalogenation, what is eliminated?", options: ["H‚ÇÇO", "H‚ÇÇ", "HX (hydrogen halide)", "X‚ÇÇ"], answer: 2 },
        { q: "When alkenes react with Br‚ÇÇ in CCl‚ÇÑ (inert solvent), what product forms?", options: ["Bromoalkane", "Dibromoalkane", "Bromoalcohol", "No reaction"], answer: 1 },
        { q: "What color change occurs when Br‚ÇÇ/CCl‚ÇÑ reacts with alkenes?", options: ["Colorless to brown", "Brown to colorless", "Yellow to green", "No change"], answer: 1 },
        { q: "When alkenes react with Br‚ÇÇ in water, what is the product?", options: ["Dibromoalkane only", "Bromoalcohol and dibromoalkane", "Alcohol only", "Bromoalkane"], answer: 1 },
        { q: "What catalyst is used in hydrogenation of alkenes?", options: ["H‚ÇÉPO‚ÇÑ", "Ni, Pt, or Pd", "FeBr‚ÇÉ", "AlCl‚ÇÉ"], answer: 1 },
        { q: "What is the product of hydrogenation of ethene?", options: ["Ethanol", "Ethane", "Ethyne", "Ethanal"], answer: 1 },
        { q: "According to Markovnikov's rule, where does H add in HBr + propene?", options: ["To more substituted carbon", "To less substituted carbon (carbon with more H)", "Randomly", "No addition"], answer: 1 },
        { q: "What is the major product of propene + HBr (Markovnikov)?", options: ["1-bromopropane", "2-bromopropane", "1,2-dibromopropane", "Propane"], answer: 1 },
        { q: "What conditions give anti-Markovnikov addition in hydrohalogenation?", options: ["Standard conditions", "Presence of peroxides (ROOR)", "Low temperature", "High pressure"], answer: 1 },
        { q: "In anti-Markovnikov addition of HBr to propene, what is the major product?", options: ["2-bromopropane", "1-bromopropane", "1,2-dibromopropane", "No product"], answer: 1 },
        { q: "What mechanism occurs in anti-Markovnikov addition with peroxides?", options: ["Electrophilic addition", "Free radical addition", "Nucleophilic addition", "Elimination"], answer: 1 },
        { q: "What catalyst is used for hydration of alkenes?", options: ["Ni", "H‚ÇÉPO‚ÇÑ or dilute H‚ÇÇSO‚ÇÑ", "NaOH", "KMnO‚ÇÑ"], answer: 1 },
        { q: "What is the product of hydration of ethene?", options: ["Ethane", "Ethanol", "Ethanal", "Ethanoic acid"], answer: 1 },
        { q: "In hydration of propene, what is the major product (Markovnikov)?", options: ["Propan-1-ol", "Propan-2-ol", "Propanal", "Propanoic acid"], answer: 1 },
        { q: "What reagent is used for oxidation of alkenes to diols?", options: ["Acidified KMnO‚ÇÑ (hot)", "Cold dilute KMnO‚ÇÑ or OsO‚ÇÑ", "Br‚ÇÇ/CCl‚ÇÑ", "H‚ÇÇ/Ni"], answer: 1 },
        { q: "What product forms from hot acidified KMnO‚ÇÑ with alkenes?", options: ["Diol", "Ketones/carboxylic acids (cleavage)", "Alcohol", "Alkane"], answer: 1 },
        { q: "What is used in ozonolysis of alkenes?", options: ["O‚ÇÇ", "O‚ÇÉ followed by Zn/H‚ÇÇO or (CH‚ÇÉ)‚ÇÇS", "H‚ÇÇO‚ÇÇ", "KMnO‚ÇÑ"], answer: 1 },
        { q: "What products form from ozonolysis of alkenes?", options: ["Alcohols", "Aldehydes and/or ketones", "Carboxylic acids", "Alkanes"], answer: 1 },
        { q: "Ozonolysis of but-2-ene yields what product(s)?", options: ["2 molecules of ethanal", "Butanal", "Butan-2-one", "Butanoic acid"], answer: 0 },
        { q: "What intermediate forms in ozonolysis?", options: ["Carbocation", "Ozonide", "Carbene", "Free radical"], answer: 1 },
        { q: "In free radical halogenation, which propagation step generates alkyl radical?", options: ["X‚ÇÇ ‚Üí 2X‚Ä¢", "R-H + X‚Ä¢ ‚Üí R‚Ä¢ + HX", "R‚Ä¢ + X‚ÇÇ ‚Üí RX + X‚Ä¢", "2R‚Ä¢ ‚Üí R-R"], answer: 1 },
        { q: "Why is tertiary carbon most reactive in free radical halogenation?", options: ["Least stable radical", "Most stable radical formed", "Most steric hindrance", "Least substituted"], answer: 1 },
        { q: "What is the correct order of alkene stability?", options: ["Monosubstituted > disubstituted", "Tetrasubstituted > trisubstituted > disubstituted > monosubstituted", "All equal", "Unsubstituted most stable"], answer: 1 },
        { q: "Which alkene would give only one product on ozonolysis?", options: ["Propene", "But-2-ene (symmetrical)", "But-1-ene", "2-methylpropene"], answer: 1 }
      ]
    };

    // Default configuration
    const defaultConfig = {
      game_title: "‚öóÔ∏è A-LEVEL CHEMISTRY",
      player1_name: "Player 1",
      player2_name: "Player 2",
      primary_color: "#00e5ff",
      secondary_color: "#ff006e",
      background_color: "#0a192f",
      text_color: "#ffffff",
      surface_color: "#0a192f"
    };

    // Game state
    let board = Array(9).fill(null);
    let currentPlayer = 1;
    let selectedCell = null;
    let gameActive = true;
    let stats = { player1_wins: 0, player2_wins: 0, draws: 0 };
    let statsRecord = null;
    let currentDifficulty = 'easy';
    let usedQuestions = { easy: new Set(), medium: new Set(), hard: new Set() };

    const winPatterns = [
      [0, 1, 2], [3, 4, 5], [6, 7, 8],
      [0, 3, 6], [1, 4, 7], [2, 5, 8],
      [0, 4, 8], [2, 4, 6]
    ];

    // Initialize board
    function initBoard() {
      const boardEl = document.getElementById('game-board');
      boardEl.innerHTML = '';
      for (let i = 0; i < 9; i++) {
        const cell = document.createElement('div');
        cell.className = 'cell w-28 h-28 md:w-32 md:h-32 glass-panel rounded-2xl flex items-center justify-center text-6xl md:text-7xl font-black cursor-pointer';
        cell.dataset.index = i;
        cell.addEventListener('click', () => handleCellClick(i));
        boardEl.appendChild(cell);
      }
    }

    // Handle cell click
    function handleCellClick(index) {
      if (!gameActive || board[index] !== null) return;
      selectedCell = index;
      showQuestion();
    }

    // Get random unused question
    function getRandomQuestion() {
      const questions = questionBanks[currentDifficulty];
      const used = usedQuestions[currentDifficulty];
      const available = questions.filter((_, idx) => !used.has(idx));
      
      if (available.length === 0) {
        used.clear();
        return questions[Math.floor(Math.random() * questions.length)];
      }
      
      const randomIdx = Math.floor(Math.random() * available.length);
      const question = available[randomIdx];
      const originalIdx = questions.indexOf(question);
      used.add(originalIdx);
      
      return question;
    }

    // Show question modal
    function showQuestion() {
      const modal = document.getElementById('question-modal');
      const questionText = document.getElementById('question-text');
      const optionsContainer = document.getElementById('options-container');
      const feedback = document.getElementById('feedback');
      const header = document.getElementById('question-header');
      const badge = document.getElementById('difficulty-badge');
      
      const config = window.elementSdk?.config || defaultConfig;
      const playerName = currentPlayer === 1 ? config.player1_name : config.player2_name;
      header.textContent = `${playerName.toUpperCase()} QUESTION`;
      header.style.color = currentPlayer === 1 ? config.primary_color : config.secondary_color;
      
      const difficultyInfo = {
        easy: { text: 'FOUNDATION', color: '#10b981', bg: 'rgba(16, 185, 129, 0.2)' },
        medium: { text: 'INTERMEDIATE', color: '#f59e0b', bg: 'rgba(245, 158, 11, 0.2)' },
        hard: { text: 'ADVANCED', color: '#ef4444', bg: 'rgba(239, 68, 68, 0.2)' }
      };
      const diff = difficultyInfo[currentDifficulty];
      badge.textContent = diff.text;
      badge.style.color = diff.color;
      badge.style.backgroundColor = diff.bg;
      badge.style.borderColor = diff.color;
      
      const q = getRandomQuestion();
      questionText.textContent = q.q;
      
      optionsContainer.innerHTML = '';
      feedback.classList.add('hidden');
      
      q.options.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn w-full text-left p-5 md:p-6 glass-panel text-white rounded-xl border-2 border-cyan-500/30 font-semibold text-lg';
        btn.innerHTML = `<span class="inline-block w-12 h-12 rounded-lg bg-cyan-500/20 text-center leading-[3rem] mr-4 font-black text-xl text-cyan-400">${String.fromCharCode(65 + i)}</span>${opt}`;
        btn.addEventListener('click', () => checkAnswer(i, q.answer));
        optionsContainer.appendChild(btn);
      });
      
      modal.classList.remove('hidden');
    }

    // Check answer
    function checkAnswer(selected, correct) {
      const feedback = document.getElementById('feedback');
      const buttons = document.querySelectorAll('#options-container button');
      
      buttons.forEach((b, i) => {
        b.disabled = true;
        b.classList.remove('option-btn');
        if (i === correct) {
          b.style.backgroundColor = 'rgba(16, 185, 129, 0.3)';
          b.style.borderColor = '#10b981';
          b.style.color = '#10b981';
          b.style.boxShadow = '0 0 25px rgba(16, 185, 129, 0.6)';
        } else if (i === selected) {
          b.style.backgroundColor = 'rgba(239, 68, 68, 0.3)';
          b.style.borderColor = '#ef4444';
          b.style.color = '#ef4444';
          b.style.boxShadow = '0 0 25px rgba(239, 68, 68, 0.6)';
        } else {
          b.style.opacity = '0.3';
        }
      });
      
      feedback.classList.remove('hidden');
      
      if (selected === correct) {
        feedback.innerHTML = '‚úÖ CORRECT! Placing mark...';
        feedback.style.color = '#10b981';
        feedback.style.textShadow = '0 0 20px rgba(16, 185, 129, 0.8)';
        setTimeout(() => {
          document.getElementById('question-modal').classList.add('hidden');
          makeMove();
        }, 1500);
      } else {
        feedback.innerHTML = '‚ùå WRONG! Turn lost...';
        feedback.style.color = '#ef4444';
        feedback.style.textShadow = '0 0 20px rgba(239, 68, 68, 0.8)';
        setTimeout(() => {
          document.getElementById('question-modal').classList.add('hidden');
          selectedCell = null;
          switchPlayer();
        }, 1800);
      }
    }

    // Make move
    function makeMove() {
      if (selectedCell === null) return;
      
      const config = window.elementSdk?.config || defaultConfig;
      board[selectedCell] = currentPlayer;
      const cells = document.querySelectorAll('.cell');
      const cell = cells[selectedCell];
      cell.textContent = currentPlayer === 1 ? '‚úï' : '‚óØ';
      cell.style.color = currentPlayer === 1 ? config.primary_color : config.secondary_color;
      cell.classList.add('taken', 'pop-in');
      cell.classList.remove('cursor-pointer');
      
      const winner = checkWinner();
      if (winner) {
        gameActive = false;
        highlightWinningCells(winner.pattern);
        setTimeout(() => showGameOver(winner.player), 1000);
      } else if (board.every(c => c !== null)) {
        gameActive = false;
        setTimeout(() => showGameOver(0), 600);
      } else {
        switchPlayer();
      }
      
      selectedCell = null;
    }

    // Check winner
    function checkWinner() {
      for (const pattern of winPatterns) {
        const [a, b, c] = pattern;
        if (board[a] && board[a] === board[b] && board[a] === board[c]) {
          return { player: board[a], pattern };
        }
      }
      return null;
    }

    // Highlight winning cells
    function highlightWinningCells(pattern) {
      const cells = document.querySelectorAll('.cell');
      const config = window.elementSdk?.config || defaultConfig;
      const winColor = board[pattern[0]] === 1 ? config.primary_color : config.secondary_color;
      pattern.forEach(i => {
        cells[i].style.backgroundColor = winColor + '50';
        cells[i].style.boxShadow = `0 0 50px ${winColor}, 0 0 100px ${winColor}`;
        cells[i].style.borderColor = winColor;
        cells[i].style.borderWidth = '4px';
      });
    }

    // Switch player
    function switchPlayer() {
      currentPlayer = currentPlayer === 1 ? 2 : 1;
      updateTurnIndicator();
    }

    // Update turn indicator
    function updateTurnIndicator() {
      const indicator = document.getElementById('turn-indicator');
      const config = window.elementSdk?.config || defaultConfig;
      const playerName = currentPlayer === 1 ? config.player1_name : config.player2_name;
      const symbol = currentPlayer === 1 ? 'X' : 'O';
      
      indicator.textContent = `‚ñ∂ ${playerName.toUpperCase()} TURN (${symbol})`;
      indicator.style.background = currentPlayer === 1 
        ? `linear-gradient(90deg, ${config.primary_color}, #0096c7)`
        : `linear-gradient(90deg, ${config.secondary_color}, #d90368)`;
      indicator.style.color = config.text_color;
      
      const p1Card = document.getElementById('player1-card');
      const p2Card = document.getElementById('player2-card');
      p1Card.style.borderColor = currentPlayer === 1 ? config.primary_color : 'rgba(0,229,255,0.3)';
      p2Card.style.borderColor = currentPlayer === 2 ? config.secondary_color : 'rgba(255,0,110,0.3)';
      
      if (currentPlayer === 1) {
        p1Card.style.boxShadow = `0 0 40px ${config.primary_color}80, inset 0 0 20px ${config.primary_color}20`;
        p2Card.style.boxShadow = '0 8px 32px rgba(0,0,0,0.4)';
      } else {
        p2Card.style.boxShadow = `0 0 40px ${config.secondary_color}80, inset 0 0 20px ${config.secondary_color}20`;
        p1Card.style.boxShadow = '0 8px 32px rgba(0,0,0,0.4)';
      }
    }

    // Show game over
    async function showGameOver(winner) {
      const modal = document.getElementById('gameover-modal');
      const text = document.getElementById('gameover-text');
      const icon = document.getElementById('gameover-icon');
      const config = window.elementSdk?.config || defaultConfig;
      
      if (winner === 0) {
        text.textContent = "DRAW!";
        icon.textContent = 'ü§ù';
        stats.draws++;
      } else {
        const playerName = winner === 1 ? config.player1_name : config.player2_name;
        text.textContent = `${playerName.toUpperCase()} WINS!`;
        icon.textContent = 'üèÜ';
        if (winner === 1) stats.player1_wins++;
        else stats.player2_wins++;
      }
      
      await saveStats();
      updateScoreDisplay();
      modal.classList.remove('hidden');
    }

    // Save stats
    async function saveStats() {
      if (!window.dataSdk) return;
      
      if (statsRecord) {
        statsRecord.player1_wins = stats.player1_wins;
        statsRecord.player2_wins = stats.player2_wins;
        statsRecord.draws = stats.draws;
        const result = await window.dataSdk.update(statsRecord);
        if (result.isError) {
          console.error('Failed to update stats:', result.error);
        }
      } else {
        const result = await window.dataSdk.create({
          player1_wins: stats.player1_wins,
          player2_wins: stats.player2_wins,
          draws: stats.draws
        });
        if (result.isError) {
          console.error('Failed to create stats:', result.error);
        }
      }
    }

    // Update score display
    function updateScoreDisplay() {
      const config = window.elementSdk?.config || defaultConfig;
      document.getElementById('p1-wins').textContent = stats.player1_wins;
      document.getElementById('p2-wins').textContent = stats.player2_wins;
      document.getElementById('draws').textContent = stats.draws;
    }

    // Reset game
    function resetGame() {
      board = Array(9).fill(null);
      currentPlayer = 1;
      selectedCell = null;
      gameActive = true;
      
      const cells = document.querySelectorAll('.cell');
      cells.forEach(cell => {
        cell.textContent = '';
        cell.style.color = '';
        cell.style.backgroundColor = '';
        cell.style.borderColor = '';
        cell.style.borderWidth = '';
        cell.style.boxShadow = '';
        cell.classList.remove('taken', 'pop-in');
        cell.classList.add('cursor-pointer');
      });
      
      document.getElementById('gameover-modal').classList.add('hidden');
      updateTurnIndicator();
    }

    // Reset all stats
    async function resetAllStats() {
      stats = { player1_wins: 0, player2_wins: 0, draws: 0 };
      
      if (statsRecord && window.dataSdk) {
        const result = await window.dataSdk.delete(statsRecord);
        if (result.isOk) {
          statsRecord = null;
        } else {
          console.error('Failed to delete stats:', result.error);
        }
      }
      
      updateScoreDisplay();
      resetGame();
      Object.keys(usedQuestions).forEach(level => usedQuestions[level].clear());
    }

    // Set difficulty
    function setDifficulty(level) {
      currentDifficulty = level;
      
      document.querySelectorAll('.difficulty-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.level === level) {
          btn.classList.add('active');
          btn.style.opacity = '1';
        } else {
          btn.style.opacity = '0.5';
        }
      });
    }

    // Data handler
    const dataHandler = {
      onDataChanged(data) {
        if (data.length > 0) {
          statsRecord = data[0];
          stats.player1_wins = statsRecord.player1_wins || 0;
          stats.player2_wins = statsRecord.player2_wins || 0;
          stats.draws = statsRecord.draws || 0;
          updateScoreDisplay();
        }
      }
    };

    // Config change handler
    async function onConfigChange(config) {
      document.getElementById('game-title').textContent = config.game_title || defaultConfig.game_title;
      document.getElementById('player1-display').textContent = config.player1_name || defaultConfig.player1_name;
      document.getElementById('player2-display').textContent = config.player2_name || defaultConfig.player2_name;
      
      const cells = document.querySelectorAll('.cell');
      cells.forEach((cell, i) => {
        if (board[i] === 1) cell.style.color = config.primary_color || defaultConfig.primary_color;
        else if (board[i] === 2) cell.style.color = config.secondary_color || defaultConfig.secondary_color;
      });
      
      updateScoreDisplay();
      updateTurnIndicator();
    }

    // Initialize
    async function init() {
      initBoard();
      setDifficulty('easy');
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities: (config) => ({
            recolorables: [
              {
                get: () => config.primary_color || defaultConfig.primary_color,
                set: (v) => { config.primary_color = v; window.elementSdk.setConfig({ primary_color: v }); }
              },
              {
                get: () => config.secondary_color || defaultConfig.secondary_color,
                set: (v) => { config.secondary_color = v; window.elementSdk.setConfig({ secondary_color: v }); }
              },
              {
                get: () => config.background_color || defaultConfig.background_color,
                set: (v) => { config.background_color = v; window.elementSdk.setConfig({ background_color: v }); }
              },
              {
                get: () => config.text_color || defaultConfig.text_color,
                set: (v) => { config.text_color = v; window.elementSdk.setConfig({ text_color: v }); }
              },
              {
                get: () => config.surface_color || defaultConfig.surface_color,
                set: (v) => { config.surface_color = v; window.elementSdk.setConfig({ surface_color: v }); }
              }
            ],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ['game_title', config.game_title || defaultConfig.game_title],
            ['player1_name', config.player1_name || defaultConfig.player1_name],
            ['player2_name', config.player2_name || defaultConfig.player2_name]
          ])
        });
      }
      
      if (window.dataSdk) {
        const initResult = await window.dataSdk.init(dataHandler);
        if (initResult.isError) {
          console.error('Failed to initialize Data SDK:', initResult.error);
        }
      }
      
      document.getElementById('play-again-btn').addEventListener('click', resetGame);
      document.getElementById('reset-stats').addEventListener('click', resetAllStats);
      
      document.querySelectorAll('.difficulty-btn').forEach(btn => {
        btn.addEventListener('click', () => setDifficulty(btn.dataset.level));
      });
      
      updateTurnIndicator();
    }

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c23e0ffd6b324ba',t:'MTc2OTEzNTUyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
